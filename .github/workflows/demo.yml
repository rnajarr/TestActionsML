name: EjecuciÃ³n de script de MATLAB
on:
  push:
    branches: [ main ]
jobs:
  ejecutar_script_matlab:
    runs-on: ubuntu-latest
    container:
      image: mathworks/matlab:r2021a
    steps:
    - name: Establecer permisos en la carpeta temporal de GitHub Actions
      run: |
        sudo chmod -R 777 /__w/_temp
    - name: Establecer permisos en el directorio temporal de GitHub Actions
      run: |
        sudo chown -R $USER:$USER /__w/_temp

    - name: Establecer permisos en el directorio de trabajo
      run: |
            sudo chown -R $USER:$USER $GITHUB_WORKSPACE
    - name: Clonar el repositorio
      uses: actions/checkout@v2
    - name: Ejecutar script de MATLAB
      run: |
        cd scripts
        matlab -nodisplay -nosplash -r "run('example.m')"



#name: GitHub Actions Demo with Docker
#run-name: ${{ github.actor }} is testing out GitHub Actions ðŸš€
#on: push
#jobs:
#  Explore-GitHub-Actions:
#    name: Run Matlab in docker
#    runs-on: ubuntu-latest
#    container:
#      image: mathworks/matlab:latest
#      volumes:
#        - ${{ github.workspace }}
#    steps:
#      - name: example command execute
#        run: ls -la
#      - name: pwd
#        run: pwd
#      - name: Print workspace
#        run: pwd ${{ github.workspace }}
#      - name: cd
#        run: cd ${{ github.workspace }} && ls
#      - name: Check out the repo
#        uses: actions/checkout@v2
      
#name: EjecuciÃ³n de script MATLAB

#on:
 # push:
  #  branches:
   #   - main

#jobs:
 # ejecucion-de-script:
  #  runs-on: ubuntu-latest
   # steps:
    #  - name: Checkout del repositorio
     #   uses: actions/checkout@v2
     # - name: EjecuciÃ³n de imagen de MATLAB
      #  run: |
       #       docker run --rm -v $PWD/Scripts:/scripts -v $PWD/Scripts/license.lic:/usr/local/MATLAB/R2021a/licenses/license.lic mathworks/matlab:r2021a /bin/bash -c "cd /scripts && matlab -nodisplay -r 'try, example, catch ME, fprintf('%s', getReport(ME)), exit(1), end, exit'"
              #docker run --rm -v $PWD/scripts:/scripts mathworks/matlab:r2021a /bin/bash -c "cd /scripts && matlab -nodisplay -r 'try, example, catch ME, fprintf('%s', getReport(ME)), exit(1), end, exit'" 
              #matlab -nodisplay -nosplash -nodesktop -r "run('/scripts/example.m');exit;"
        #env:
         # LM_LICENSE_FILE: /scripts/license.lic
